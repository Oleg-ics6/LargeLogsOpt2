# Работа с  логами

## Обработка логов

Для расчёта *95-го* и *99-го* **перцентиля** решено было использовать **list**, т.к. количество удовлетворяющих условию чисел, заранее нам не известно. Лучшем решением для такого большого количества элементов в массиве было бы использование **numpy.array**, но данный массив является статическим, т.е. не удовлетворяет поставленной задаче. Для расчёта **перцентиля** список должен находится в упорядоченном по возростанию состоянии( можно и не упорядочивать список, передавая его в *numpy.percentile()*, но тогда время на обработку одного лога будет превышать *12 минут*), поэтому использован модуль **bisect** и метод **insort** поддерживающий список в сортированном состоянии. Использование метода **insort** позволило сократить время обработки одного лога в среднем до **30 секунд**. В среднем на обработку всех логов потребовалось **30 минут**. В обработке логов не задействован модуль *multiprocessing*, который позволил бы ускорить время выполнения программы, т.к. в данном случае ухудшилась бы читаймость вывода логов в *stdout*. Для обработки файлов использовано построчное, ленивое чтение, что позволяет не считывать файл полностью в память.

## Архивирование логов

Для архивирования логов был задействован модуль *multiprocessing*, позволивший ускорить время архивирования с ≈ **150 секунд**(N = 1) до ≈ **36 секунд**(N = 4). Копирование файла осуществленно при помощи модуля *shutil* при чём файл не считывается полностью в память: выставлен размер буфера в 20000000 байт ≈ 19.07 Мб.